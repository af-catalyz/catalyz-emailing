<?php


/**
 * Skeleton subclass for representing a row from the 'campaign' table.
 *
 *
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * jeu. 03 mai 2012 11:26:43 CEST
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class Campaign extends BaseCampaign {

	const STATUS_DRAFT = 1;
	const STATUS_ERROR = 2;
	const STATUS_SCHEDULED = 3;
	const STATUS_PREPARING_SEND = 4;
	const STATUS_SENDING = 5;
	const STATUS_COMPLETED = 6;
	const STATUS_CANCELLED = 7;

	const SCHEDULING_NONE = 0;
	const SCHEDULING_NOW = 1;
	const SCHEDULING_AT = 2;

	const OPTION_TEST_USER = 0;
	const OPTION_TEST_GROUP = 1;
	const OPTION_TEST_LIST = 2;

	const ANALYTICS_CAMPAIGN_NAME = 0;
	const ANALYTICS_CAMPAIGN_SUBJECT = 1;
	const ANALYTICS_CAMPAIGN_CUSTOM = 2;

	const TARGET_ALL = 0;
	const TARGET_GROUPS = 1;

	/**
	 * Initializes internal state of Campaign object.
	 * @see        parent::__construct()
	 */
	public function __construct()
	{
		// Make sure that parent constructor is always invoked, since that
		// is where any default values for this object are set.
		parent::__construct();
	}

	public function getStatusBadge(){
		$badge = '';

		switch($this->status){
			case self::STATUS_ERROR:
				$badge = sprintf('<span class="label label-important pull-right">%s</span>', __('Paramétrage incorrect'));
				break;
			case self::STATUS_SENDING:
				$badge = sprintf('<span class="label label-warning pull-right">%s</span>', __('Envoi en cours'));
				break;
			case self::STATUS_COMPLETED:
				$badge = sprintf('<span class="label label-success pull-right">%s</span>', __('Envoyée'));
				break;
		} // switch

		return $badge;
	}

} // Campaign

$columns_map = array('from'   => CampaignPeer::NAME,'to'     => CampaignPeer::SLUG);
sfPropelBehavior::add('Campaign', array('sfPropelActAsSluggableBehavior' => array('columns' => $columns_map)));